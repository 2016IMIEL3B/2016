drop database if exists quotation_back;
CREATE DATABASE quotation_back;


USE quotation_back;


CREATE TABLE Fuel
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(30) NOT NULL,
	CONSTRAINT UK_Fuel UNIQUE (entitled)
);

CREATE TABLE HorsePower
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	value int
);

CREATE TABLE Price
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	value FLOAT,
    	type NVARCHAR(30)
);

CREATE TABLE Formul
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(30) NOT NULL,
	CONSTRAINT UK_Formul UNIQUE (entitled)
);

CREATE TABLE HomeType
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(30) NOT NULL,
	CONSTRAINT UK_HomeType UNIQUE (entitled)
);

CREATE TABLE HeaterType
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(30) NOT NULL,
	CONSTRAINT UK_HeaterType UNIQUE (entitled)
);

CREATE TABLE Mark
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(30) NOT NULL,
	CONSTRAINT UK_Mark UNIQUE (entitled)
);

CREATE TABLE Model
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(30) NOT NULL,
	markId INT NOT NULL,
	CONSTRAINT UK_Model UNIQUE (entitled),
	CONSTRAINT FK_Model_Mark FOREIGN KEY (markId) REFERENCES Mark (id)
);

CREATE TABLE Role
(
	id SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	entitled NVARCHAR(20) NOT NULL,
	CONSTRAINT UK_Role UNIQUE (entitled)
);

CREATE TABLE Address
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	nbStreet INT NOT NULL,
	nameStreet NVARCHAR(75) NOT NULL,
	zip NVARCHAR(5) NOT NULL,
	town NVARCHAR(50) NOT NULL
);

CREATE TABLE User
(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	lastName NVARCHAR(50) NOT NULL,
	firstName NVARCHAR(50) NOT NULL,
	login NVARCHAR(50) NOT NULL,
	password NVARCHAR(50) NOT NULL,
	roleId SMALLINT NOT NULL,
	addressId INT NOT NULL,
	CONSTRAINT UK_User UNIQUE (login),
	CONSTRAINT FK_User_Role FOREIGN KEY (roleId) REFERENCES Role (id),
	CONSTRAINT FK_User_Address FOREIGN KEY (addressId) REFERENCES Address (id)
);


